{"version":3,"sources":["before.js","admin-page.js","after.js"],"names":["$","OTFAdminPageDetail","_this","this","_classCallCheck","initTabSettings","initPageLayout","initFooterLayout","each","index","element","initSlider","_createClass","key","value","$container","find","on","removeClass","addClass","attr","prev","val","OREAdminFunctionJs","formatPrice","Number","trim","replace","event","currentTarget","target","_renderTabHtml","listElement","_tabAction","unit","$slider","data","slider","range","min","max","step","slide","ui","children","html","id","change","handle","closest","next","_icon","count","_step2","_iterator2","Symbol","iterator","_iteratorNormalCompletion2","done","_step3","_iterator3","_iteratorNormalCompletion3","appendTo","hide","preventDefault","parent","OTFdminSwitchOnOffJs","maps","classmap","init","$input","$switch","selector","_this2","getSelectorString","actionShowHide","prop","stop","slideDown","duration","slideUp","_typeof","join","document","ready","jQuery"],"mappings":"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","file":"admin-page.js","sourcesContent":["(function ($) {","class OTFAdminPageDetail {\n    constructor() {\n        this.initTabSettings();\n        // this.formatPrice();\n        this.initPageLayout();\n        this.initFooterLayout();\n        $('.otf-customize-slider .otf-slider').each((index, element) => {\n            this.initSlider(element);\n        })\n    }\n\n    initPageLayout() {\n        let $container = $('[otf-page-layout]');\n        $container.find('li').on('click', function () {\n            $container.find('li').removeClass('active');\n            let value = $(this).addClass('active').find('img').attr('alt');\n            $container.prev().val(value);\n        });\n    }\n\n    initFooterLayout() {\n        let $container = $('.opal-control-footer');\n        $container.find('.footer-select').on('change', function () {\n            let value = $container.find('option:selected').val();\n            $container.find('.image-select-tpl').removeClass('active');\n            $container.find('.image-select [data-value=' +value+']').addClass('active');\n            $container.prev().val(value);\n        });\n    }\n\n    formatPrice() {\n        $('[format-price=\"true\"]', '#opaltab-customfield').each((index, element) => {\n            $(element).val(OREAdminFunctionJs.formatPrice(Number($(element).val().trim().replace(/[^\\d]*/g, ''))));\n            $(element).on('keyup', (event) => {\n                $(event.currentTarget).val(OREAdminFunctionJs.formatPrice(Number(event.target.value.trim().replace(/[^\\d]*/g, ''))))\n            });\n        })\n    }\n\n    initTabSettings() {\n        let listElement = [];\n        $('#postbox-container-2 [id^=\"osf_page_\"].postbox').each((index, element) => {\n            listElement.push(element);\n        });\n        this._renderTabHtml(listElement);\n        this._tabAction();\n        // setup Map\n    }\n\n    initSlider(element) {\n        let $slider = $(element);\n        let id = $slider.data('id');\n        let unit = $slider.data('unit') ? $slider.data('unit') : '';\n        $slider.slider({\n            range : \"min\",\n            min   : $slider.data('min'),\n            max   : $slider.data('max'),\n            step  : $slider.data('step'),\n            value : $slider.data('value'),\n            create: function (event, ui) {\n                $slider.children('.ui-slider-handle').html(`<span>${$slider.slider('value')}${unit}</span>`);\n            },\n            slide : function (event, ui) {\n                $slider.children('.ui-slider-handle').html(`<span>${ui.value}${unit}</span>`);\n                $('#' + id).val(ui.value);\n            },\n            change: function (event, ui) {\n                $(ui.handle).closest('.cmb2-slider-element').find('[opal-hidden=\"true\"]').val(ui.value);\n            }\n        });\n        $slider.next().on('click', function () {\n            $slider.slider('value', $slider.data('default-value'));\n        })\n    }\n\n    _renderTabHtml(listElement) {\n        let html = `\n<section id=\"opaltab-customfield\">\n    <h2 class=\"opaltab-heading\"><span>Page Settings</span></h2>\n    <div class=\"opal-customfield-tabs tabs-style-bar\">\n        <nav class=\"opal-nav\">\n            <ul>`;\n        for (let element of listElement) {\n            let _id = '#tab-section-' + $(element).attr('id');\n            let _icon = $(`label[for=\"${$(element).attr('id')}-hide\"] [class*=\"icon-\"]`);\n            _icon = _icon.length > 0 ? `<i class=\"${_icon.attr('class')}\"></i>` : '';\n            let _title = $('>h2', element).text();\n            html += `\n                <li>\n                    <a href=\"${_id}\">\n                        ${_icon}\n                        <span>${_title}</span>\n                    </a>\n                </li>`\n        }\n        html += `\n            </ul>\n        </nav>\n        <div class=\"opal-content-wrap content-wrap\">`;\n        let count = 1;\n        for (let element of listElement) {\n            let id = 'tab-section-' + $(element).attr('id');\n            html += `<section id=\"${id}\"></section>`;\n            count++;\n        }\n        html += `\n        </div>\n    </div>\n</section>`;\n        $('#postbox-container-2').before(html);\n        for (let element of listElement) {\n            $('>.inside', element).appendTo('#tab-section-' + $(element).attr('id'));\n            $(element).hide();\n        }\n    }\n\n    _tabAction() {\n        $('#opaltab-customfield .opal-nav ul li:first-child').addClass('tab-current');\n        $('#opaltab-customfield .opal-content-wrap > section:first-child').addClass('content-current');\n        $('#opaltab-customfield .opal-nav li a').on('click', (event) => {\n            event.preventDefault();\n            $('#opaltab-customfield .opal-nav li').removeClass('tab-current');\n            $(event.currentTarget).parent().addClass('tab-current');\n            let id = $(event.currentTarget).attr('href');\n            $('#opaltab-customfield .opal-content-wrap > section').removeClass('content-current');\n            $(id).addClass('content-current');\n        })\n    }\n}\n\nclass OTFdminSwitchOnOffJs {\n    classmap = null;\n\n    constructor(maps) {\n        this.classmap = maps;\n        this.init();\n    }\n\n    init() {\n        $('.opal-onoffswitch-wrapper').each((index, element) => {\n            let $input   = $('input.onoffswitch-input', element);\n            let $switch  = $('.onoffswitch-checkbox', element);\n            let selector = this.getSelectorString($switch);\n            this.actionShowHide(selector, $switch.prop('checked'), 0);\n            $switch.on('change', () => {\n                this.actionShowHide(selector, $switch.prop('checked'));\n                if ($switch.prop('checked')) {\n                    $input.val('1');\n                } else {\n                    $input.val('0');\n                }\n            })\n        })\n    }\n\n    actionShowHide(selector, show, duration = 400) {\n        if (show) {\n            $(selector).stop().slideDown(duration);\n        } else {\n            $(selector).stop().slideUp(duration);\n        }\n    }\n\n    getSelectorString($switch) {\n        if (typeof $switch.data('show-fields') === 'object') {\n            return $switch.data('show-fields').map((field) => {\n                return '.cmb2-id-' + field.replace(/_/g, '-');\n            }).join(',');\n        } else {\n            return false;\n        }\n    }\n}\n\n$(document).ready(() => {\n    new OTFAdminPageDetail();\n    new OTFdminSwitchOnOffJs();\n});","})(jQuery);"]}